# Lab 7

## Что такое Ханойская башня

Даны A стержней, на один из которых нанизано B колец, причём кольца отличаются размером и лежат меньшее на большем. Задача состоит в том, чтобы перенести пирамиду из B колец за наименьшее число ходов на другой стержень. За один раз разрешается переносить только одно кольцо, причём нельзя класть большее кольцо на меньшее.

![image](https://upload.wikimedia.org/wikipedia/commons/0/07/Tower_of_Hanoi.jpeg)

## Рекурсивное решение

Самый простой вариант.
Перенос N - 1 дисков на временную, перенос нижнего диска на целевую, перенос N - 1 с временной на целевую. Рекурсивно.

## «Треугольное» решение

Расположим стержни в виде треугольника. Самое  маленькое кольцо переложим на любую отметку. В дальнейшем будем перемещать это кольцо в том же направлении. Перенесём какое-нибудь из оставшихся колец, после чего снова переложим самое маленькое кольцо...

## Циклическое решение

Пусть запись вида 1-2 значит: переложить диск или с 1-го штыря на 2-й, или со 2-го на 1-й, в зависимости от того, где он меньше. Тогда, чтобы решить головоломку с четным количеством дисков, надо многократно повторять действия: 1-2, 1-3, 2-3. Если число дисков нечетно — 1-3, 1-2, 2-3.

## Применение кода Грея для решения

Пусть N — количество дисков. Начнём с кода Грея длины N, состоящего из одних нулей (то есть G0), и будем двигаться по кодам Грея (от Gi переходить к Gi+1). Поставим в соответствие каждому i-ому биту текущего кода Грея i-ый диск (причём самому младшему биту соответствует наименьший по размеру диск, а самому старшему биту — наибольший). Поскольку на каждом шаге изменяется ровно один бит, то мы можем понимать изменение бита i как перемещение i-го диска. Заметим, что для всех дисков, кроме наименьшего, на каждом шаге имеется ровно один вариант хода (за исключением стартовой и финальной позиций). Для наименьшего диска всегда имеется два варианта хода, однако имеется стратегия правильного выбора хода: для нечётного N последовательность перемещений наименьшего диска f→t→r→f→t→r→… (где f — стартовый стержень, t — финальный стержень, r -оставшийся стержень), а для чётного f→r→t→f→r→t→….
