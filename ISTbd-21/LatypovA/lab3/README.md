# Lab3

## Кто такой Чарльз Хоар? Чем он известен?

Английский учёный, специализирующийся в области информатики и вычислительной техники. Наиболее известен как разработчик алгоритма «быстрой сортировки» (1960), на сегодняшний день являющегося наиболее популярным алгоритмом сортировки.

## Общее описание метода Хоара

- Выбрать из массива элемент, называемый опорным. Это может быть любой из элементов массива. От выбора опорного элемента не зависит корректность алгоритма, но в отдельных случаях может сильно зависеть его эффективность.
- Сравнить все остальные элементы с опорным и переставить их в массиве так, чтобы разбить массив на три непрерывных отрезка, следующих друг за другом: «элементы меньшие опорного», «равные» и «большие».
- Для отрезков «меньших» и «больших» значений выполнить рекурсивно ту же последовательность операций, если длина отрезка больше единицы.

## Алгоритм метода Хоара

1. Выбрать элемент из массива. Назовём его опорным.
2. Разбиение: перераспределение элементов в массиве таким
   образом, что элементы меньше опорного помещаются перед ним,
   а больше или равные после.
3. Рекурсивно применить первые два шага к двум подмассивам слева
   и справа от опорного элемента. Рекурсия не применяется
   к массиву, в котором только один элемент или отсутствуют элементы.

## Как происходит выбор опорного пункта

Обычно выбирают первый, средний или последний элемент.
Но лучшим выбором является тот, что ближе всех к медиане.
Можно вообще случайно его выбрать.

## Разбиение Ломуто

Данный алгоритм разбиения был предложен Нико Ломуто
и популяризован в книгах Бентли (Programming Pearls) и Кормена
(Введение в алгоритмы).
Каждый раз, когда находится элемент, меньше или равный опорному,
индекс увеличивается, и элемент вставляется перед опорным.
Хоть эта схема разбиения проще и компактнее, чем схема Хоара, она менее
эффективна и используется в обучающих материалах.
Сложность данной быстрой сортировки падает до O(N\ :sup:`2`),
когда массив уже отсортирован или все его элементы равны.

## Разбиение Хоара

Данная схема использует два индекса (один в начале массива, другой в конце),
которые приближаются друг к другу, пока не найдётся пара элементов,
где один больше опорного и расположен перед ним, а второй меньше и
расположен после. Эти элементы меняются местами. Обмен происходит до тех
пор, пока индексы не пересекутся. Алгоритм возвращает последний индекс.
Схема Хоара эффективнее схемы Ломуто, так как происходит в среднем в
три раза меньше обменов (swap) элементов, и разбиение эффективнее,
даже когда все элементы равны. Его и писал.

## Достоинства и недостатки

### +

- Один из самых быстродействующих (на практике) из алгоритмов
  внутренней сортировки общего назначения.
- Хорошо сочетается с механизмами кэширования и виртуальной памяти.

### -

- Сильно деградирует по скорости (до O(N\ :sup:`2`)) в худшем или
  близком к нему случае, что может случиться при неудачных входных данных.
- Прямая реализация в виде функции с двумя рекурсивными вызовами
  может привести к ошибке переполнения стека
- Неустойчив

## Интересные факты метода Хоара

1. На практике массив обычно делят не на три, а на две части:
   например, «меньшие опорного» и «равные и большие»; такой подход в
   общем случае эффективнее, так как упрощает алгоритм разделения
2. Хоар разработал этот метод применительно к машинному переводу;
   словарь хранился на магнитной ленте, и сортировка слов обрабатываемого
   текста позволяла получить их переводы за один прогон ленты, без
   перемотки её назад.
3. Алгоритм был придуман Хоаром во время его пребывания в Советском Союзе,
   где он обучался в Московском университете компьютерному переводу и
   занимался разработкой русско-английского разговорника.
