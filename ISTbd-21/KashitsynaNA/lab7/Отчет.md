# Лабораторная работа №7. Реализовать рекурсивный алгоритм “Ханойские башни”

``` c++
#include <iostream>
using namespace std;

//Функция перемещения одного кольца
void moving(char firstPoint, char secondPoint);
//Функция перемещения всей башни
void towerMoving(int count, char firstPoint, char secondPoint, char freePoint);

int main()
{
	setlocale(LC_ALL, "rus");
	int count;
	cout << "Ханойские башни. Всего 3 стержня - А, Б, В." << endl << "Перемещаем башню со стержня А на стержень Б." << endl;
	cout << "Введите количество колец: "; cin >> count;
	cout << endl << "Алгоритм:" << endl;
	towerMoving(count, 'А', 'Б', 'В');
	return 0;
}

void moving(char firstPoint, char secondPoint)
{
	cout << "Из стержня " << firstPoint << " в стержень " << secondPoint << endl;
}

void towerMoving(int count, char firstPoint, char secondPoint, char freePoint)
{
	if (count == 0) { return; } //Если количество дисков равно 0, то выхожу из функции

	towerMoving(count - 1, firstPoint, freePoint, secondPoint);
	moving(firstPoint, secondPoint);
	towerMoving(count - 1, freePoint, secondPoint, firstPoint);
}
```

## Ответы на вопросы

- Что такое Ханойская башня?
Ханойская башня - это известная головоломка 19 века. Суть: на одном из трех стержней находятся кольца; кольца разные по размеру, лежат друг на друге - меньшее на большем; необходимо перенести всю башню на другой стержень за минимальное число ходов, при этом можно перемещать только одно кольцо за один ход и можно только класть меньшее кольцо на большее.

- Рекурсивное решение
Необходимо рекурсивно решить задачу "башню, состоящую из N-1 кольца, переместить на другой стержень". Затем переместить самое большое кольцо на свободный стержень, и рекурсивно решить: "башню, состоящую из N-1 кольца, переместить на стержень с большим кольцом". Минимальное число ходов равно (2^N)-1.

- «Треугольное» решение
Расставим стержни в виде треугольника. Переместим самое маленькое кольцо на любой стержень. Далее его надо будет перемещать в том же направлении. Потом переместим какое-либо из оставшихся колец, а после опять переместим самое маленькое кольцо.
Если пронумеровать кольца, то четные будут перемещаться в одном направлении, а нечетные - в противоположном.

- Циклическое решение
1) Если количество колец равно четному числу, то необходимо многократно повторять: переложить кольцо с 1 стержня на 2 (или наоборот), с 1 на 3 (или наоборот) и со 2 на 3 (или наоборот).
2) Если нечетное, то: с 1 на 3 (или наоборот), с 1 на 2 (или наоборот) и со 2 на 3 (или наоборот).

- Применение кода Грея для решения
Код Грея - это рефлексный двоичный код. В нем два смежных значения различаются только в одном двоичном разряде.
Начинаем с кода длины N, состоящего из нулей (G0), будем двигаться по кодам (от Gi к Gi+1). Каждому i-ому биту кода поставим в соответствие i-ое кольцо. Для каждого кольца, кроме наименьшего, на каждом шаге есть только один вариант хода; для наименьшего - два. Есть стратегия правильного выбора хода: для нечетного - последовательность перемещений наименьшего кольца  f→t→r→f→t→r→… , для четного - f→r→t→f→r→t→… (f — стартовый стержень, t — финальный, r - оставшийся). 